<script type="text/javascript">
  RED.nodes.registerType('hubspot-api-request',{
    category: 'hubspot',
    paletteLabel: 'API Request',
    color: '#ff7a59',
    icon: "font-awesome/fa-search",
    defaults: {
      account: { value: "", type: "hubspot-account" },
      method: { value: "PUT" },
      path: { value: "" },
      body: { value: "ignore" },
      output: { value: "payload" },
    },
    inputs: 1,
    outputs: 1,
    label: function() {
      return this.name || "Hubspot API";
    },
    oneditprepare: function() {
      $("#node-input-body").typedInput({
        types: [
          {
            value: "nothing",
            options: [
              { value: 'nothing', label: 'Nothing' },
              { value: 'payload', label: 'Send Payload as request body' },
            ]
          }
        ]
      })
      $("#node-input-method").typedInput({
        types: [
          {
            value: "PUT",
            options: [
              { value: 'GET' },
              { value: 'PUT' },
              { value: 'PATCH' },
              { value: 'POST' },
              { value: 'DELETE' },
            ]
          }
        ]
      })
      $("#node-input-output").typedInput({
        type:"msg",
        types:["msg"],
        typeField: "#node-input-output-type"
      })
    }
  });
</script>

<script type="text/html" data-template-name="hubspot-api-request">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-account"><i class="fa fa-institution"></i> Hubspot</label>
    <input type="text" id="node-input-account" />
  </div>
  <div class="form-row">
    <label for="node-input-method"><i class="fa fa-tasks"></i> Method</label>
    <input type="text" id="node-input-method" />
  </div>
  <div class="form-row">
    <label for="node-input-path"><i class="fa fa-tag"></i> Path</label>
    <input type="text" id="node-input-path" placeholder="/some/api/not/wrapped/yet">
  </div>
  <div class="form-row">
    <label for="node-input-body">Body</label>
    <input type="text" id="node-input-body" />
  </div>
  <div class="form-row">
    <label for="node-input-output"><i class="fa fa-sign-out"></i> Output</label>
    <input type="text" id="node-input-output">
    <input type="hidden" id="node-input-output-type">
  </div>
</script>

<script type="text/html" data-help-name="hubspot-api-request">
  <p>A simple node that converts the message payloads into all lower-case characters</p>
</script>
